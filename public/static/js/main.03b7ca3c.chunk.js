(this["webpackJsonpclient-side"]=this["webpackJsonpclient-side"]||[]).push([[0],{38:function(e,t,s){},61:function(e,t,s){},62:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(1),c=s.n(i),o=s(31),a=s.n(o),r=(s(38),s(7)),l=s(3),d=s(4),u=s(6),h=s(5),j=s(8),b=s(2),v=s(10),p=s(16),m=s.n(p),O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DOMAINURL,x=m.a.create({baseURL:O,withCredentials:!0}),f={signup:function(e){return console.log(O),x.post("/api/signup",e)},login:function(e){return x.post("/api/login",e)},logout:function(){return x.post("/api/logout",{})},getAuthenticatedUser:function(){return console.log({baseURL:O,env:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})}),x.get("/api/isLoggedIn")}},g=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:"",message:null,loggedInUser:[]},e.handleInputChange=function(t){var s=t.target,n=s.name,i=s.value;e.setState(Object(v.a)({},n,i))},e.handleFormSubmission=function(t){t.preventDefault();var s=e.state,n=s.email,i=s.password;f.login({email:n,password:i}).then((function(t){var s=t.data.user;e.props.onUserChange(s),e.props.history.push("/profile/".concat(s._id)),console.log("this was called")})).catch((function(t){if(t.response&&t.response.data)return e.setState({message:t.response.data.message})}))},e}return Object(d.a)(s,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("form",{onSubmit:this.handleFormSubmission,className:"landing-form",children:[Object(n.jsxs)("label",{children:["Email:",Object(n.jsx)("input",{name:"email",type:"email",placeholder:"ana@ironhack.com",value:this.state.email,onChange:this.handleInputChange})]}),Object(n.jsxs)("label",{children:["Password:",Object(n.jsx)("input",{name:"password",type:"password",placeholder:"**********",value:this.state.password,onChange:this.handleInputChange})]}),Object(n.jsx)("button",{type:"submit",className:"details-btn",children:" Login "})]}),this.state.message&&Object(n.jsxs)("div",{children:[" ",this.state.message," "]})]})}}]),s}(c.a.Component),w=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={username:"",email:"",password:"",message:null},e.handleInputChange=function(t){var s=t.target,n=s.name,i=s.value;e.setState(Object(v.a)({},n,i))},e.handleFormSubmission=function(t){t.preventDefault();var s=e.state,n=s.username,i=s.email,c=s.password;f.signup({username:n,email:i,password:c}).then((function(t){var s=t.data.user;e.props.history.push("/profile/".concat(s._id))})).catch((function(t){if(t.response&&t.response.data)return e.setState({message:t.response.data.message})}))},e}return Object(d.a)(s,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("form",{onSubmit:this.handleFormSubmission,className:"landing-form",children:[Object(n.jsxs)("label",{children:["Username:",Object(n.jsx)("input",{name:"username",type:"text",placeholder:"ana",value:this.state.username,onChange:this.handleInputChange})]}),Object(n.jsxs)("label",{children:["Email:",Object(n.jsx)("input",{name:"email",type:"email",placeholder:"ana@ironhack.com",value:this.state.email,onChange:this.handleInputChange})]}),Object(n.jsxs)("label",{children:["Password:",Object(n.jsx)("input",{name:"password",type:"password",placeholder:"**********",value:this.state.password,onChange:this.handleInputChange})]}),Object(n.jsx)("button",{className:"details-btn",children:" Signup "})]}),this.state.message&&Object(n.jsxs)("div",{children:[" ",this.state.message," "]})]})}}]),s}(c.a.Component),N=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DOMAINURL,k=m.a.create({baseURL:N,withCredentials:!0}),y={service:k,getSearchedBooks:function(e){return k.post("/api/book-search?q=".concat(e))},getBookDetails:function(e){return k.get("/api/details/".concat(e))}},C=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).handleInput=function(e){n.setState({query:e.target.value})},n.handleSearch=function(){y.getSearchedBooks(n.state.query.toLowerCase()).then((function(e){n.setState({searchResult:e.data.searchOutput})})).catch((function(e){return console.log(e)}))},n.state={searchResult:[],query:""},n}return Object(d.a)(s,[{key:"render",value:function(){return console.log(this.state.searchResult),Object(n.jsxs)("div",{className:"search-container",children:[Object(n.jsx)("form",{className:"form-inline",onChange:this.handleSearch,children:Object(n.jsx)("input",{placeholder:"Search books",className:"form-control mr-sm-2",name:"query",type:"search",autoComplete:"off",value:this.state.query,onChange:this.handleInput})}),this.state.query.length>0&&Object(n.jsx)("div",{className:"search-results",children:this.state.searchResult.map((function(e){return Object(n.jsx)("div",{className:"single-result",children:Object(n.jsx)(b.b,{to:"/bookinfo/".concat(null===e||void 0===e?void 0:e.id),children:e.volumeInfo.title})})}))})]})}}]),s}(i.Component),S=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={newHere:!0},e.handleNewHereState=function(t){t.preventDefault(),e.setState({newHere:!e.state.newHere})},e}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"container-desktop",children:[Object(n.jsxs)("div",{className:"row landing-cover",children:[Object(n.jsx)("div",{className:"col-lg-8",children:Object(n.jsx)("h1",{children:"Join our community of readers"})}),Object(n.jsxs)("div",{className:"auth-landing col-lg-4",children:[!this.state.newHere&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"landing-login",children:[Object(n.jsx)("h3",{children:"Welcome to Bookr"}),Object(n.jsx)(g,{}),Object(n.jsx)("hr",{})]}),Object(n.jsx)("div",{children:Object(n.jsx)(b.b,{to:"/",onClick:function(t){return e.handleNewHereState(t)},children:"New here? Create an account for free!"})})]}),this.state.newHere&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"landing-login",children:[Object(n.jsx)("h3",{children:"Sign up and start reading today!"}),Object(n.jsx)(w,{}),Object(n.jsx)("hr",{})]}),Object(n.jsx)("div",{children:Object(n.jsx)(b.b,{to:"/",onClick:function(t){return e.handleNewHereState(t)},children:"Already have an account? Log in"})})]})]})]}),Object(n.jsxs)("div",{className:"row search-section",children:[Object(n.jsxs)("div",{className:"col-md-3",children:[Object(n.jsx)("h2",{children:"Search your favorite books"}),Object(n.jsx)("p",{children:"Bookr's search engine is powered by the Google Books API, one of the most extensive book APIs available."}),Object(n.jsx)(C,{})]}),Object(n.jsxs)("div",{className:"col-md-9 popular-searches",children:[Object(n.jsx)("h2",{children:"Popular Searches"}),Object(n.jsxs)("ul",{className:"searches-landing",children:[Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"bookinfo/9mEh1dJTw5cC",className:"link-white-txt",children:"Doctor Sleep"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/qYqHPwAACAAJ",className:"link-white-txt",children:"Giovanni's Room"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/PxNcDwAAQBAJ",className:"link-white-txt",children:"The 7 1/2 Deaths of Evelyn Hardcastle"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/z9Q99X-OOtAC",className:"link-white-txt",children:"The Secret"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/Y_VuDwAAQBAJ",className:"link-white-txt",children:"Sharp Objects"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/hxCkDgAAQBAJ",className:"link-white-txt",children:"The Woman in the Window"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/WrL9de30FDMC",className:"link-white-txt",children:"The Girl with the Dragon Tattoo"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/kotPYEqx7kMC",className:"link-white-txt",children:"1984"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/lclWAAAAQBAJ",className:"link-white-txt",children:"If Beale Street Could Talk"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/bookinfo/SGAZdjNfruYC",className:"link-white-txt",children:"Animal Farm"})})]})]})]}),Object(n.jsx)("div",{className:"row features-section",children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsxs)("div",{className:"row features-title",children:[Object(n.jsx)("h1",{children:"Why Bookr?"}),Object(n.jsx)("hr",{})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-lg-4 try-search",children:[this.state.newHere&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"Get started"}),Object(n.jsx)(w,{}),Object(n.jsx)("hr",{}),Object(n.jsx)(b.b,{to:"/",onClick:function(t){return e.handleNewHereState(t)},children:"Already have an account? Log in"})]}),!this.state.newHere&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"Login"}),Object(n.jsx)(g,{}),Object(n.jsx)("hr",{}),Object(n.jsx)(b.b,{to:"/",onClick:function(t){return e.handleNewHereState(t)},children:"New here? Create an account for free!"})]})]}),Object(n.jsx)("div",{className:"col-lg-8",children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsxs)("div",{className:"row features-container",children:[Object(n.jsx)("div",{className:"col-lg-6",children:Object(n.jsxs)("div",{className:"feat-item",children:[Object(n.jsx)("h3",{children:"Connect with other readers"}),Object(n.jsx)("p",{children:"Follow your friends to keep up with their recent reviews and discussions"})]})}),Object(n.jsx)("div",{className:"col-lg-6",children:Object(n.jsxs)("div",{className:"feat-item",children:[Object(n.jsx)("h3",{children:"Rate and review books you've read"}),Object(n.jsx)("p",{children:"Share your thoughts on your favorite (and least favorite) books with the Bookr community"})]})})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-6",children:Object(n.jsxs)("div",{className:"feat-item",children:[Object(n.jsx)("h3",{children:"Start and join discussions"}),Object(n.jsx)("p",{children:"Have something you want to talk about? Start discussions with the community to get the conversation started, or simply join in to existing discussions"})]})}),Object(n.jsx)("div",{className:"col-lg-6",children:Object(n.jsxs)("div",{className:"feat-item",children:[Object(n.jsx)("h3",{children:"Create bookshelves"}),Object(n.jsx)("p",{children:"Keep track of books you've read and want to read in your personal online bookshelf"})]})})]})]})})]})]})})]})}}]),s}(i.Component),_=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_DOMAINURL,D=m.a.create({baseURL:_,withCredentials:!0}),I={service:D,getUserProfile:function(e){return D.get("/api/account/".concat(e))},getTimeline:function(){return D.get("/api/posts")},editAccountDetails:function(e){return D.post("/api/account/edit",e)},deleteAccount:function(){return D.post("/api/delete-account",{})},followAndUnfollow:function(e){return D.post("/api/follow/".concat(e),{})},getUsersShelves:function(e){return D.get("/api/shelves/".concat(e))},getUsersHasRead:function(e){return D.get("/api/has-read/".concat(e))},getUsersWantToRead:function(e){return D.get("/api/want-to-read/".concat(e))},addBookToHasReadList:function(e){return D.post("/api/add-to-has-read/".concat(e),{})},addBookToWantToReadList:function(e){return D.post("/api/add-to-want-to-read/".concat(e),{})},removeBookFromWantToReadList:function(e){return D.post("/api/remove-want-book/".concat(e),{})},removeBookFromHasReadList:function(e){return D.post("/api/remove-has-book/".concat(e),{})},getUsersReviews:function(e){return D.get("/api/reviews/".concat(e))},postReviewToBook:function(e,t){return D.post("/api/review/".concat(e),t)},viewSingleReview:function(e){return D.get("/api/review/".concat(e))},updateReview:function(e,t){return D.post("/api/review/edit/".concat(e),t)},deleteReview:function(e){return D.post("/api/review/delete/".concat(e),{})},startDiscussion:function(e,t){return D.post("/api/start-discussion/".concat(e),t)},viewSingleDiscussion:function(e){return D.get("/api/discuss/".concat(e))},updateDiscussion:function(e,t){return D.post("/api/discuss/edit/".concat(e),t)},deleteDiscussion:function(e){return D.post("/api/delete-discuss/".concat(e),{})},replyToDiscussion:function(e,t){return D.post("/api/discuss/".concat(e,"/reply"),t)}},R=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isLoggedInUser:!1,profile_picture:"",bio:"",userName:"",has_read:[],want_to_read:[],reviews:[],discussions:[],followers:[],following:[]},e.getUserDetails=function(){var t=e.props.match.params;I.getUserProfile(t.accountId).then((function(t){e.props.onUserChange(t.data.user),e.setState({isLoggedInUser:!0,profile_picture:t.data.user.photo,userName:t.data.user.username,has_read:t.data.user.hasRead,want_to_read:t.data.user.wantToRead,reviews:t.data.user.reviews,discussions:t.data.user.discussions,followers:t.data.user.followers,following:t.data.user.following,bio:t.data.user.bio})})).catch((function(e){return console.log(e)}))},e.handleFollowAndUnfollow=function(){I.followAndUnfollow(e.props.match.params.accountId).then((function(t){return e.props.onUserChange(t.data.updatedCurrentUser)})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getUserDetails()}},{key:"render",value:function(){var e,t,s,i,c,o,a,r;this.state.reviews.slice(Math.max(this.state.reviews.length-3,0)),this.state.discussions.slice(Math.max(this.state.discussions.length-3,0));if(!this.state.isLoggedInUser)return Object(n.jsx)("div",{children:"Loading..."});var l=null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t||null===(s=t.user)||void 0===s?void 0:s.following.includes(this.props.match.params.accountId),d=(null===(i=this.props)||void 0===i||null===(c=i.user)||void 0===c||null===(o=c.user)||void 0===o?void 0:o._id.toString())===this.props.match.params.accountId.toString();return Object(n.jsx)("div",{className:"container-fluid site-container",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-4",children:Object(n.jsxs)("div",{className:"container user-info",children:[Object(n.jsxs)("div",{className:"row user-info-top",children:[Object(n.jsxs)("div",{className:"profile-name-img",children:[Object(n.jsx)("img",{src:this.state.profile_picture,alt:"user-avi",className:"usr-avi-timeline"}),Object(n.jsx)("h4",{className:"username-profile",children:this.state.userName})]}),Object(n.jsxs)("div",{className:"user-info-right",children:[!d&&l&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("button",{onClick:this.handleFollowAndUnfollow,className:"unfollow-btn",children:"Unfollow"})}),!d&&!l&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("button",{onClick:this.handleFollowAndUnfollow,className:"follow-btn",children:"Follow"})}),d&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(b.b,{to:"/account/".concat(null===(a=this.props.user)||void 0===a||null===(r=a.user)||void 0===r?void 0:r._id),children:Object(n.jsx)("img",{src:"https://img.icons8.com/pastel-glyph/64/000000/edit--v1.png",alt:"edit-profile"})})})]})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("ul",{className:"profile-links",children:[Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:"https://img.icons8.com/ios/50/000000/star-half.png",alt:"review-icon"}),Object(n.jsxs)(b.b,{className:"profile-li",to:"/reviews/".concat(this.props.match.params.accountId),children:[1===this.state.reviews.length&&Object(n.jsx)(n.Fragment,{children:"1 Review"}),0===this.state.reviews.length||this.state.reviews.length>1&&Object(n.jsxs)(n.Fragment,{children:[this.state.reviews.length," Reviews"]})]})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:"https://img.icons8.com/fluent-systems-regular/48/000000/comment-discussion.png",alt:"discuss-icon"}),Object(n.jsxs)(b.b,{className:"profile-li",to:"/discussions/".concat(this.props.match.params.accountId),children:[1===this.state.discussions.length&&Object(n.jsx)(n.Fragment,{children:"1 Discussion"}),0===this.state.discussions.length||this.state.discussions.length>1&&Object(n.jsxs)(n.Fragment,{children:[this.state.discussions.length," Discussions"]})]})]}),Object(n.jsxs)("li",{children:[Object(n.jsx)("img",{src:"https://img.icons8.com/pastel-glyph/50/000000/books.png",alt:"shelf-icon"}),Object(n.jsxs)(b.b,{className:"profile-li",to:"/shelves/".concat(this.props.match.params.accountId),children:[this.state.want_to_read.length+this.state.has_read.length," Shelves"]})]})]})}),Object(n.jsx)("div",{className:"row user-profile-bio",children:Object(n.jsx)("p",{className:"user-bio",children:this.state.bio})}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"usr-follow",children:[Object(n.jsxs)("div",{className:"user-followers",children:[Object(n.jsxs)("p",{children:[this.state.followers.length," Followers"]}),this.state.followers.map((function(e){return Object(n.jsx)(b.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e._id),children:Object(n.jsx)("img",{src:null===e||void 0===e?void 0:e.photo,alt:"usr-avi",className:"user-avi-side"})})}))]}),Object(n.jsxs)("div",{className:"user-following",children:[Object(n.jsxs)("p",{children:[this.state.following.length," Following"]}),this.state.following.map((function(e){return Object(n.jsx)(b.b,{to:"/profile/".concat(null===e||void 0===e?void 0:e._id),children:Object(n.jsx)("img",{src:null===e||void 0===e?void 0:e.photo,alt:"usr-avi",className:"user-avi-side"})})}))]})]})})]})}),Object(n.jsxs)("div",{className:"col-lg-8",children:[Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"section-header",children:Object(n.jsx)("h3",{className:"username-profile",children:"Recent Reviews"})}),Object(n.jsx)("div",{className:"row review-container",children:Object(n.jsx)("ul",{children:this.state.reviews.map((function(e){var t;return Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/reviewinfo/".concat(e._id),children:Object(n.jsx)("img",{src:null===(t=e.book)||void 0===t?void 0:t.image_url,alt:"book-cover"})})})}))})})]}),Object(n.jsxs)("div",{className:"container testing-style",children:[Object(n.jsx)("div",{className:"section-header",children:Object(n.jsx)("h3",{className:"username-profile",children:"Recent Discussions"})}),Object(n.jsx)("div",{className:"row discussion-container",children:Object(n.jsx)("ul",{children:this.state.discussions.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{to:"/discussinfo/".concat(e._id),children:Object(n.jsx)("img",{src:e.book.image_url,alt:"book-cover"})})})}))})})]})]})]})})}}]),s}(i.Component),U=(s(61),function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleLogout=function(){console.log("route called"),f.logout().then((function(t){console.log("logged out!",{blah:t}),e.props.onUserChange(null)})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"render",value:function(){var e,t,s,i,c,o;return console.log({props:this.props}),Object(n.jsxs)("nav",{className:"navbar navbar-light nav-font",children:[Object(n.jsx)("div",{children:Object(n.jsx)(b.b,{to:"/home",className:"home-btn",children:Object(n.jsx)("h2",{children:"BOOKR."})})}),this.props.user&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{children:Object(n.jsxs)("ul",{className:"nav-ul",children:[Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{className:"nav-links",to:"/home",children:"Home"})}),Object(n.jsx)("li",{children:Object(n.jsx)(b.b,{className:"nav-links",to:"/shelves/".concat(null===(e=this.props.user)||void 0===e||null===(t=e.user)||void 0===t?void 0:t._id),children:"My Shelves"})}),Object(n.jsx)("li",{children:Object(n.jsxs)("div",{className:"dropdown",children:[Object(n.jsx)("button",{className:"btn tan-btn dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Account"}),Object(n.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[Object(n.jsx)(b.b,{className:"dropdown-item",to:"/profile/".concat(null===(s=this.props.user)||void 0===s||null===(i=s.user)||void 0===i?void 0:i._id),children:"Profile"}),Object(n.jsx)(b.b,{className:"dropdown-item",to:"/account/".concat(null===(c=this.props.user)||void 0===c||null===(o=c.user)||void 0===o?void 0:o._id),children:"Account Details"}),Object(n.jsx)(b.b,{className:"dropdown-item",to:"/",onClick:this.handleLogout,children:"Logout"})]})]})})]})}),Object(n.jsx)("div",{children:Object(n.jsx)(C,{})})]}),null===this.props.user&&Object(n.jsx)("div",{children:Object(n.jsx)(C,{})})]})}}]),s}(i.Component)),T=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e,n,i,c,o,a,r,d,u,h,j;Object(l.a)(this,s);for(var b=arguments.length,p=new Array(b),m=0;m<b;m++)p[m]=arguments[m];return(j=t.call.apply(t,[this].concat(p))).state={userAccountInfo:[],email:null===(e=j.props.user)||void 0===e||null===(n=e.user)||void 0===n?void 0:n.email,bio:null===(i=j.props.user)||void 0===i||null===(c=i.user)||void 0===c?void 0:c.bio,username:null===(o=j.props.user)||void 0===o||null===(a=o.user)||void 0===a?void 0:a.username,photo:null===(r=j.props.user)||void 0===r||null===(d=r.user)||void 0===d?void 0:d.photo,password:null===(u=j.props.user)||void 0===u||null===(h=u.user)||void 0===h?void 0:h.passwordHash},j.retreiveUserInfo=function(){var e,t,s;I.getUserProfile(null===(e=j.props)||void 0===e||null===(t=e.user)||void 0===t||null===(s=t.user)||void 0===s?void 0:s._id).then((function(e){j.setState({userAccountInfo:e.data.user})}))},j.handleInputChange=function(e){console.log(e.target);var t=e.target,s=t.name,n=t.value;j.setState(Object(v.a)({},s,n))},j.handleImageChange=function(e){console.log(e.target);var t=e.target.files;j.setState({photo:t[0]})},j.handleSubmission=function(e){e.preventDefault();var t=j.state,s=t.email,n=t.bio,i=t.username,c=t.password,o=t.photo,a=new FormData;console.log(j.state),a.append("photo",o),a.append("email",s),a.append("username",i),a.append("bio",n),a.append("password",c),I.editAccountDetails(a).then((function(e){j.props.onUserChange(e)})).catch((function(e){return console.log(e)}))},j}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.retreiveUserInfo()}},{key:"render",value:function(){var e,t,s,i=this;console.log(this.state.photo),console.log(this.state.password);var c=(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t||null===(s=t.user)||void 0===s?void 0:s._id.toString())===this.props.match.params.accountId.toString();return Object(n.jsx)(n.Fragment,{children:c&&Object(n.jsx)("div",{className:"container page-container",children:Object(n.jsxs)("form",{onSubmit:function(e){return i.handleSubmission(e)},className:"bookr-form",children:[Object(n.jsxs)("label",{children:["Change profile picture",Object(n.jsx)("input",{type:"file",name:"photo",onChange:function(e){return i.handleImageChange(e)}})]}),Object(n.jsxs)("label",{children:["Email Address",Object(n.jsx)("input",{type:"email",name:"email",onChange:this.handleInputChange,value:this.state.email,placeholder:"".concat(this.state.email)})]}),Object(n.jsxs)("label",{children:["User Name",Object(n.jsx)("input",{type:"text",name:"username",onChange:this.handleInputChange,value:this.state.username,placeholder:"".concat(this.state.username)})]}),Object(n.jsxs)("label",{children:["Bio",Object(n.jsx)("input",{type:"text",name:"bio",onChange:this.handleInputChange,value:this.state.bio,placeholder:"".concat(this.state.bio)})]}),Object(n.jsxs)("label",{children:["Input password to change details",Object(n.jsx)("input",{type:"password",placeholder:"*******",name:"password",value:this.state.password,autoComplete:"off",onChange:this.handleInputChange})]}),Object(n.jsx)("button",{type:"submit",children:"Save Profile Settings"})]})})})}}]),s}(i.Component),A=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isLoggedInUser:!1,booksHasRead:[],booksWantsToRead:[],user_id:"",username:""},e.getBookshelves=function(){var t=e.props.match.params;I.getUserProfile(t.accountId).then((function(t){console.log(t.data.user),e.setState({booksHasRead:t.data.user.hasRead,booksWantsToRead:t.data.user.wantToRead,isLoggedInUser:t.data.authorized,username:t.data.user.username,user_id:t.data.user._id})})).catch((function(e){return console.log(e)}))},e.removeBookFromWantShelf=function(t){I.removeBookFromWantToReadList(t.target.id).then((function(t){e.props.history.push("/shelves/".concat(e.props.match.params.accountId)),window.location.reload()})).catch((function(e){return console.log(e)}))},e.removeBookFromHasReadShelf=function(t){I.removeBookFromHasReadList(t.target.id).then((function(t){e.props.history.push("/shelves/".concat(e.props.match.params.accountId)),window.location.reload()})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getBookshelves()}},{key:"render",value:function(){var e=this;return console.log(this.state.booksHasRead),Object(n.jsx)("div",{className:"container-fluid site-container",children:Object(n.jsxs)("div",{className:"row",children:[this.state.booksHasRead.length>0&&Object(n.jsx)("div",{className:"col-lg-6",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{children:"Books user has read"}),Object(n.jsx)("div",{className:"row",children:this.state.booksHasRead.map((function(t){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:t.image_url,alt:"book-cvr",className:"bookshelf-item"}),Object(n.jsx)("button",{onClick:function(t){return e.removeBookFromHasReadShelf(t)},className:"review-dlt-btn",id:t._id,children:"Remove Book"})]},t._id)}))})]})}),this.state.booksWantsToRead.length>0&&Object(n.jsxs)("div",{className:"col-lg-6",children:[Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("h1",{children:"Books user wants to read"})}),Object(n.jsx)("div",{className:"row",children:this.state.booksWantsToRead.map((function(t){return Object(n.jsxs)("div",{className:"hover-ctrl",children:[Object(n.jsx)("img",{src:t.image_url,className:"bookshelf-item",alt:"book-cvr"}),Object(n.jsx)("button",{onClick:function(t){return e.removeBookFromWantShelf(t)},id:t._id,className:"review-dlt-btn",children:"Remove Book"})]},t._id)}))})]})]})})}}]),s}(i.Component),F=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={title:"",discussionContent:""},e.handleInputChange=function(t){var s=t.target,n=s.name,i=s.value;e.setState(Object(v.a)({},n,i))},e.handleSubmission=function(t){t.preventDefault();var s=e.props.match.params.bookId,n=e.state,i=n.title,c=n.discussionContent;I.startDiscussion(s,{title:i,discussionContent:c}).then((function(t){var s,n;e.props.history.push("/discussions/".concat(null===(s=e.props.user)||void 0===s||null===(n=s.user)||void 0===n?void 0:n._id))})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"container page-container",children:Object(n.jsxs)("form",{onSubmit:this.handleSubmission,className:"bookr-form",children:[Object(n.jsxs)("label",{children:["Title:",Object(n.jsx)("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInputChange})]}),Object(n.jsxs)("label",{children:["Discussion:",Object(n.jsx)("input",{type:"text",name:"discussionContent",value:this.state.discussionContent,onChange:this.handleInputChange})]}),Object(n.jsx)("button",{type:"submit",children:"Start Discussion"})]})})}}]),s}(i.Component),B=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={discussion:[],title:"",discussionContent:"",replyContent:"",editMode:!1},e.getSingleDiscussion=function(){I.viewSingleDiscussion(e.props.match.params.discussionId).then((function(t){e.setState({discussion:t.data.singleDiscussion,title:t.data.singleDiscussion.title,discussionContent:t.data.singleDiscussion.discussionContent,editMode:!1})})).catch((function(e){return console.log(e)}))},e.handleInputChange=function(t){var s=t.target,n=s.name,i=s.value;e.setState(Object(v.a)({},n,i))},e.handleEditMode=function(t){e.setState({editMode:!0})},e.saveEditChanges=function(t){t.preventDefault();var s=e.state,n=s.title,i=s.discussionContent,c=e.props.match.params.discussionId;I.updateDiscussion(c,{title:n,discussionContent:i}).then((function(t){return e.props.history.push("/discussinfo/".concat(c))})).catch((function(e){return console.log(e)}))},e.deleteDiscussion=function(t){t.preventDefault();var s=e.props.match.params.discussionId;I.deleteDiscussion(s).then((function(t){var s,n;return e.props.history.push("/discussions/".concat(null===(s=e.props.user)||void 0===s||null===(n=s.user)||void 0===n?void 0:n._id))})).catch((function(e){return console.log(e)}))},e.replyToDiscussion=function(t){t.preventDefault();var s=e.props.match.params.discussionId,n=e.state.replyContent;I.replyToDiscussion(s,{replyContent:n}).then((function(t){return e.props.history.push("/discussinfo/".concat(s))})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getSingleDiscussion()}},{key:"render",value:function(){var e,t,s,i,c,o,a,r,l,d,u,h,j,v=this,p=this.state.discussion;console.log(p);var m=(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t||null===(s=t.user)||void 0===s?void 0:s._id.toString())===(null===(i=p.author)||void 0===i?void 0:i._id);return Object(n.jsx)("div",{className:"container-fluid site-container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"post-container container",children:[Object(n.jsxs)("div",{className:"review-user row",children:[Object(n.jsxs)("div",{className:"to-left",children:[Object(n.jsx)("img",{src:null===(c=p.author)||void 0===c?void 0:c.photo,alt:"user",className:"usr-avi-timeline"}),Object(n.jsx)(b.b,{to:"/profile/".concat(null===(o=p.author)||void 0===o?void 0:o._id),children:null===(a=p.author)||void 0===a?void 0:a.username})]}),m&&!this.state.editMode&&Object(n.jsxs)("div",{className:"to-right",children:[Object(n.jsx)("button",{onClick:this.handleEditMode,className:"edit-btn",children:"Edit discussion"}),Object(n.jsx)("button",{onClick:function(e){return v.deleteDiscussion(e)},className:"dlt-btn",children:"Delete discussion"})]})]}),Object(n.jsxs)("div",{className:"post-content row",children:[Object(n.jsx)("div",{className:"post-book-img col-md-3",children:Object(n.jsx)("img",{src:null===(r=p.book)||void 0===r?void 0:r.image_url,alt:"book-cvr"})}),!this.state.editMode&&Object(n.jsxs)("div",{className:"post-text-content col-md-9",children:[Object(n.jsxs)("h4",{children:[null===(l=p.book)||void 0===l?void 0:l.title," by: ",null===(d=p.book)||void 0===d?void 0:d.authors]}),Object(n.jsx)("h5",{children:p.title}),Object(n.jsx)("p",{children:p.discussionContent||p.content})]}),m&&this.state.editMode&&Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:function(e){return v.saveEditChanges(e)},className:"bookr-form",children:[Object(n.jsxs)("label",{children:["Title:",Object(n.jsx)("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleInputChange})]}),Object(n.jsxs)("label",{children:["Discussion:",Object(n.jsx)("input",{type:"text",name:"discussionContent",value:this.state.discussionContent,onChange:this.handleInputChange})]}),Object(n.jsx)("button",{type:"submit",children:"Save Changes"})]})})]}),Object(n.jsxs)("div",{className:"replies-container row",children:[(null===(u=p.replies)||void 0===u?void 0:u.length)>0&&Object(n.jsx)(n.Fragment,{children:p.replies.map((function(e){var t,s,i;return Object(n.jsxs)("div",{className:"single-reply container",children:[Object(n.jsxs)("div",{className:"row reply-user-info",children:[Object(n.jsx)("img",{src:null===(t=e.author)||void 0===t?void 0:t.photo,className:"user-avi-side",alt:"user-avi"}),Object(n.jsx)("p",{children:Object(n.jsx)(b.b,{to:"/profile/".concat(null===(s=e.author)||void 0===s?void 0:s._id),className:"thread-link",children:null===(i=e.author)||void 0===i?void 0:i.username})})]}),Object(n.jsx)("div",{className:"row reply-content",children:Object(n.jsx)("p",{children:e.replyContent})})]})}))}),Object(n.jsxs)("div",{className:"add-reply-container row",children:[Object(n.jsx)("img",{src:null===(h=this.props.user)||void 0===h||null===(j=h.user)||void 0===j?void 0:j.photo,alt:"user-avi",className:"user-avi-side"}),Object(n.jsxs)("form",{className:"reply-form",onSubmit:function(e){return v.replyToDiscussion(e)},children:[Object(n.jsx)("input",{type:"text",name:"replyContent",value:this.state.replyContent,placeholder:"Leave a comment",onChange:this.handleInputChange}),Object(n.jsx)("button",{type:"submit",className:"reply-btn",children:"Reply"})]})]})]})]})})},p._id)}}]),s}(i.Component),E=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={numOfStars:0,content:""},e.handleInputChange=function(t){var s=t.target,n=s.name,i=s.value;e.setState(Object(v.a)({},n,i))},e.addReviewToBook=function(t){t.preventDefault();var s=e.state,n=s.numOfStars,i=s.content,c=e.props.match.params.bookId;I.postReviewToBook(c,{numOfStars:n,content:i}).then((function(t){var s,n,i,c;console.log({reviewProps:null===(s=e.props.user)||void 0===s||null===(n=s.user)||void 0===n?void 0:n._id}),e.props.history.push("/reviews/".concat(null===(i=e.props.user)||void 0===i||null===(c=i.user)||void 0===c?void 0:c._id))})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"render",value:function(){var e=this.state,t=e.numOfStars,s=e.content;return Object(n.jsx)("div",{className:"container page-container",children:Object(n.jsxs)("form",{onSubmit:this.addReviewToBook,className:"bookr-form",children:[Object(n.jsxs)("label",{children:["Rating / 5",Object(n.jsx)("input",{type:"number",min:"0",max:"5",name:"numOfStars",value:t,onChange:this.handleInputChange})]}),Object(n.jsxs)("label",{children:["Review",Object(n.jsx)("input",{type:"text",name:"content",value:s,onChange:this.handleInputChange})]}),Object(n.jsx)("button",{type:"submit",children:"Post Review"})]})})}}]),s}(i.Component),P=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={review:[],numOfStars:0,content:"",editMode:!1},e.getSingleReview=function(){I.viewSingleReview(e.props.match.params.reviewId).then((function(t){return e.setState({review:t.data.singleReview,numOfStars:t.data.singleReview.numOfStars,content:t.data.singleReview.content})})).catch((function(e){return console.log(e)}))},e.handleInputChange=function(t){var s=t.target,n=s.name,i=s.value;e.setState(Object(v.a)({},n,i))},e.handleEditMode=function(t){e.setState({editMode:!0})},e.saveEditChanges=function(t){t.preventDefault();var s=e.state,n=s.numOfStars,i=s.content,c=e.props.match.params.reviewId;I.updateReview(c,{numOfStars:n,content:i}).then((function(t){var s,n;return e.props.history.push("/reviews/".concat(null===(s=e.props.user)||void 0===s||null===(n=s.user)||void 0===n?void 0:n._id))})).catch((function(e){return console.log(e)}))},e.deleteReview=function(t){t.preventDefault();var s=e.props.match.params.reviewId;I.deleteReview(s).then((function(t){var s,n;return e.props.history.push("/reviews/".concat(null===(s=e.props.user)||void 0===s||null===(n=s.user)||void 0===n?void 0:n._id))})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getSingleReview()}},{key:"render",value:function(){var e,t,s,i,c,o,a,r,l,d,u=this,h=this.state.review,j=(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t||null===(s=t.user)||void 0===s?void 0:s._id.toString())===(null===(i=h.author)||void 0===i?void 0:i._id);return console.log(h),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:null===(c=h.author)||void 0===c?void 0:c.photo,alt:"user-avi",className:"usr-avi-timeline"}),Object(n.jsx)("p",{children:null===(o=h.author)||void 0===o?void 0:o.username})]}),j&&!this.state.editMode&&Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{onClick:this.handleEditMode,children:"Edit Review"}),Object(n.jsx)("button",{onClick:function(e){return u.deleteReview(e)},children:"Delete Review"})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:null===(a=h.book)||void 0===a?void 0:a.image_url,alt:"book-cover",className:"book-cover-timeline"})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:null===(r=h.book)||void 0===r?void 0:r.title}),Object(n.jsx)("h4",{children:null===(l=h.book)||void 0===l?void 0:l.subtitle}),Object(n.jsxs)("p",{children:["Written by: ",null===(d=h.book)||void 0===d?void 0:d.authors]})]})]}),j&&!this.state.editMode&&Object(n.jsxs)("div",{children:["User Rating: ",h.numOfStars," / 5",Object(n.jsx)("p",{children:h.content})]}),j&&this.state.editMode&&Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:function(e){return u.saveEditChanges(e)},children:[Object(n.jsxs)("label",{children:["Stars / 5",Object(n.jsx)("input",{type:"number",min:"0",max:"5",name:"numOfStars",value:this.state.numOfStars,onChange:this.handleInputChange})]}),Object(n.jsxs)("label",{children:["Review",Object(n.jsx)("input",{type:"text",name:"content",value:this.state.content,onChange:this.handleInputChange})]}),Object(n.jsx)("button",{id:h._id,type:"submit",children:"Save Changes"})]})},h._id)]})}}]),s}(i.Component),L=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={reviews:[]},e.getUserReviews=function(){I.getUsersReviews(e.props.match.params.accountId).then((function(t){e.setState({reviews:t.data.reviews})})).catch((function(e){return console.log(e)}))},e.deleteReview=function(t){t.preventDefault(),I.deleteReview(t.target.id).then((function(t){e.props.history.push("/reviews/".concat(e.props.match.params.accountId)),window.location.reload()})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getUserReviews()}},{key:"render",value:function(){var e,t,s,i=this;console.log(this.state.reviews);var c=(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t||null===(s=t.user)||void 0===s?void 0:s._id.toString())===this.props.match.params.accountId.toString();return Object(n.jsxs)("div",{className:"container-fluid site-container",children:[this.state.reviews.length>0&&Object(n.jsx)("div",{className:"row",children:this.state.reviews.map((function(e){var t,s,o,a,r,l,d;return Object(n.jsxs)("div",{className:"container review-container-all",children:[Object(n.jsxs)("div",{className:"row review-user",children:[Object(n.jsxs)("div",{className:"to-left",children:[Object(n.jsx)("img",{src:null===(t=e.author)||void 0===t?void 0:t.photo,alt:"user-avi",className:"usr-avi-timeline"}),Object(n.jsx)("p",{children:Object(n.jsx)(b.b,{to:"/profile/".concat(null===(s=e.author)||void 0===s?void 0:s._id),children:null===(o=e.author)||void 0===o?void 0:o.username})})]}),Object(n.jsxs)("div",{className:"to-right",children:[Object(n.jsx)("button",{id:e._id,className:"details-btn",children:Object(n.jsx)(b.b,{to:"/reviewinfo/".concat(e._id),className:"link-white-txt",children:"Details"})}),c&&Object(n.jsx)("button",{id:e._id,onClick:function(e){return i.deleteReview(e)},className:"review-dlt-btn",children:"Delete"})]})]}),Object(n.jsxs)("div",{className:"row post-content",children:[Object(n.jsx)("div",{className:"post-content-left col-sm-3",children:Object(n.jsx)("img",{src:null===(a=e.book)||void 0===a?void 0:a.image_url,alt:"book-cvr"})}),Object(n.jsxs)("div",{className:"post-content-right col-sm-9",children:[Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:Object(n.jsxs)(b.b,{to:"/bookinfo/".concat(null===(r=e.book)||void 0===r?void 0:r.google_books_id),children:[null===(l=e.book)||void 0===l?void 0:l.title," by ",null===(d=e.book)||void 0===d?void 0:d.authors]})})}),Object(n.jsxs)("div",{children:[1===e.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2606\u2606\u2606\u2606"}),2===e.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2606\u2606\u2606"}),3===e.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2605\u2606\u2606"}),4===e.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2605\u2605\u2606"}),5===e.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2605\u2605\u2605"})]}),Object(n.jsx)("div",{children:Object(n.jsx)("p",{children:e.content})})]})]})]},e._id)}))}),0===this.state.reviews.length&&Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("h1",{children:"This user hasn't written any reviews yet."}),Object(n.jsx)("button",{children:Object(n.jsx)(b.b,{to:"/profile/".concat(this.props.match.params.accountId),children:"Back to profile"})})]})]})}}]),s}(i.Component),H=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={discussions:[]},e.getUsersDiscussions=function(){I.getUserProfile(e.props.match.params.accountId).then((function(t){e.setState({discussions:t.data.user.discussions})})).catch((function(e){return console.log(e)}))},e.deleteDiscussion=function(t){t.preventDefault(),I.deleteDiscussion(t.target._id).then((function(t){e.props.history.push("/discussions/".concat(e.props.match.params.accountId)),window.location.reload()})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getUsersDiscussions()}},{key:"render",value:function(){var e,t,s,i=this;console.log(this.state.discussions);var c=(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t||null===(s=t.user)||void 0===s?void 0:s._id.toString())===this.props.match.params.accountId.toString();return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"container-fluid site-container",children:[this.state.discussions.length>0&&Object(n.jsx)("div",{className:"row all-discuss",children:this.state.discussions.map((function(e){var t,s,o,a,r,l,d;return Object(n.jsxs)("div",{className:"container discussion-container-all",children:[Object(n.jsxs)("div",{className:"row discussion-user",children:[Object(n.jsxs)("div",{className:"to-left",children:[Object(n.jsx)("img",{src:null===(t=e.author)||void 0===t?void 0:t.photo,alt:"user-avi",className:"usr-avi-timeline"}),Object(n.jsx)("p",{children:Object(n.jsx)(b.b,{to:"/profile/".concat(null===(s=e.author)||void 0===s?void 0:s._id),children:null===(o=e.author)||void 0===o?void 0:o.username})})]}),Object(n.jsxs)("div",{className:"to-right",children:[Object(n.jsx)("button",{id:e._id,className:"details-btn",children:Object(n.jsx)(b.b,{to:"/discussinfo/".concat(e._id),className:"link-white-txt",children:"Details"})}),c&&Object(n.jsx)("button",{className:"discussion-dlt-btn",onClick:function(e){return i.deleteDiscussion(e)},children:"Delete"})]})]}),Object(n.jsxs)("div",{className:"row post-content",children:[Object(n.jsx)("div",{className:"post-content-left col-sm-3",children:Object(n.jsx)("img",{src:null===(a=e.book)||void 0===a?void 0:a.image_url,alt:"book-cvr"})}),Object(n.jsxs)("div",{className:"post-content-right col-sm-9",children:[Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:Object(n.jsxs)(b.b,{to:"/bookinfo/".concat(null===(r=e.book)||void 0===r?void 0:r.google_books_id),children:[null===(l=e.book)||void 0===l?void 0:l.title," by ",null===(d=e.book)||void 0===d?void 0:d.authors]})})}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{children:Object(n.jsx)("p",{children:e.discussionContent||e.content})})]})]}),Object(n.jsx)("div",{className:"row thread-link-container",children:Object(n.jsx)(b.b,{to:"/discussinfo/".concat(e._id),className:"thread-link",children:"View thread"})})]},e._id)}))}),0===this.state.discussions.length&&Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("h1",{children:"This user hasn't written any discussions yet."}),Object(n.jsx)("button",{children:Object(n.jsx)(b.b,{to:"/profile/".concat(this.props.match.params.accountId),children:"Back to profile"})})]})]})})}}]),s}(i.Component),M=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isLoggedIn:!1,followers:[]},e.getUserFollowers=function(){I.getUserProfile(e.props.match.params.accountId).then((function(t){e.setState({isLoggedIn:t.data.authorized,followers:t.data.user.followers})})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getUserFollowers()}},{key:"render",value:function(){return console.log(this.state.followers),Object(n.jsx)("div",{children:this.state.followers.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:e.photo,alt:"follower-avi"}),Object(n.jsx)(b.b,{to:"/profile/".concat(e._id),children:Object(n.jsx)("p",{children:e.username})})]},e._id)}))})}}]),s}(i.Component),W=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isLoggedIn:!1,following:[]},e.getUserFollowing=function(){I.getUserProfile(e.props.match.params.accountId).then((function(t){e.setState({isLoggedIn:t.data.authorized,following:t.data.user.following})})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getUserFollowing()}},{key:"render",value:function(){return console.log(this.state.following),Object(n.jsx)("div",{children:this.state.following.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:e.photo,alt:"following-avi"}),Object(n.jsx)(b.b,{to:"/profile/".concat(e._id),children:Object(n.jsx)("p",{children:e.username})})]},e._id)}))})}}]),s}(i.Component),K=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={book:[],paramId:""},e.getDetails=function(){console.log({state:e.state.paramId,params:e.props.match.params.bookId}),y.getBookDetails(e.props.match.params.bookId).then((function(t){console.log(t.data),e.setState({book:t.data,paramId:e.props.match.params.bookId})}))},e.addToHasRead=function(t){t.preventDefault(),I.addBookToHasReadList(e.state.book._id).then((function(t){var s,n,i;console.log({book:t}),e.props.history.push("/shelves/".concat(null===(s=e.props)||void 0===s||null===(n=s.user)||void 0===n||null===(i=n.user)||void 0===i?void 0:i._id))})).catch((function(e){return console.log(e)}))},e.addToWantToRead=function(t){t.preventDefault(),I.addBookToWantToReadList(e.state.book._id).then((function(t){var s,n,i;e.props.history.push("/shelves/".concat(null===(s=e.props)||void 0===s||null===(n=s.user)||void 0===n||null===(i=n.user)||void 0===i?void 0:i._id))})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getDetails()}},{key:"render",value:function(){var e=this;console.log(this.state.book);var t=this.state.book;return this.state.paramId!==this.props.match.params.bookId&&this.getDetails(),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-lg-3",children:[Object(n.jsx)("img",{src:t.image_url,alt:"book-cover"}),Object(n.jsx)("button",{children:Object(n.jsx)(b.b,{to:"/review/".concat(t._id),children:"Write a Review"})}),Object(n.jsx)("button",{children:Object(n.jsx)(b.b,{to:"/discuss/".concat(t._id),children:"Start a Discussion"})}),Object(n.jsx)("button",{onClick:function(t){return e.addToWantToRead(t)},children:"Add to want to read shelf"}),Object(n.jsx)("button",{onClick:function(t){return e.addToHasRead(t)},children:"Add to has read shelf"})]}),Object(n.jsxs)("div",{className:"col-lg-9",children:[Object(n.jsx)("h1",{children:t.title}),Object(n.jsx)("h3",{children:t.subtitle}),Object(n.jsxs)("p",{children:["by: ",t.authors]}),Object(n.jsx)("p",{children:t.description})]})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{})})]})}}]),s}(i.Component),V=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={usersTheyFollowAndPosts:[],viewingDiscussions:!1},e.getUsersTimeline=function(){I.getTimeline().then((function(t){e.setState({usersTheyFollowAndPosts:t.data.timelinePosts})})).catch((function(e){return console.log(e)}))},e.switchToDiscussionsView=function(){e.setState({viewingDiscussions:!e.state.viewingDiscussions})},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getUsersTimeline()}},{key:"render",value:function(){console.log(this.state.usersTheyFollowAndPosts);var e=this.props.user.user;return Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-3 sidebar",children:Object(n.jsxs)("div",{className:"user-stats",children:[Object(n.jsxs)("div",{className:"avi-and-name",children:[Object(n.jsx)("img",{src:null===e||void 0===e?void 0:e.photo,alt:"usr-avi",className:"usr-avi-timeline"}),Object(n.jsx)("p",{className:"home-username",children:null===e||void 0===e?void 0:e.username})]}),Object(n.jsxs)("div",{className:"below-user-sidebar",children:[Object(n.jsxs)("div",{className:"bio",children:[Object(n.jsx)("b",{children:"Bio"}),Object(n.jsx)("p",{children:null===e||void 0===e?void 0:e.bio})]}),Object(n.jsxs)("div",{className:"follow-stats-tl",children:[Object(n.jsx)("b",{children:"Following"}),Object(n.jsx)("p",{children:null===e||void 0===e?void 0:e.following.length}),Object(n.jsx)("b",{children:"Followers"}),Object(n.jsx)("p",{children:null===e||void 0===e?void 0:e.followers.length})]}),Object(n.jsxs)("div",{className:"switch-tl-view",children:[!this.state.viewingDiscussions&&Object(n.jsx)("button",{onClick:this.switchToDiscussionsView,className:"details-btn",style:{color:"white"},children:"View Discussions"}),this.state.viewingDiscussions&&Object(n.jsx)("button",{onClick:this.switchToDiscussionsView,className:"review-dlt-btn",children:"View Reviews"})]})]})]})}),Object(n.jsxs)("div",{className:"col-lg-9 main-content",children:[!this.state.viewingDiscussions&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Reviews from people you follow"}),this.state.usersTheyFollowAndPosts.map((function(e){return Object(n.jsx)("div",{children:e.reviews.map((function(t){var s,i,c;return Object(n.jsxs)("div",{className:"timeline-item container",children:[Object(n.jsxs)("div",{className:"usr-info-timeline row",children:[Object(n.jsx)("img",{src:e.photo,alt:"user",className:"usr-avi-timeline"}),Object(n.jsx)(b.b,{to:"/profile/".concat(e._id),children:e.username})]}),Object(n.jsxs)("div",{className:"post-content-timeline row",children:[Object(n.jsx)("div",{className:"post-book-img col-md-3",children:Object(n.jsx)("img",{src:null===(s=t.book)||void 0===s?void 0:s.image_url,alt:"book-cvr"})}),Object(n.jsxs)("div",{className:"post-text-content col-md-9",children:[Object(n.jsxs)("h4",{children:[null===(i=t.book)||void 0===i?void 0:i.title," by: ",null===(c=t.book)||void 0===c?void 0:c.authors]}),1===t.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2606\u2606\u2606\u2606"}),2===t.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2606\u2606\u2606"}),3===t.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2605\u2606\u2606"}),4===t.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2605\u2605\u2606"}),5===t.numOfStars&&Object(n.jsx)("p",{children:"\u2605\u2605\u2605\u2605\u2605"}),Object(n.jsx)("p",{children:t.content})]})]})]},t._id)}))})}))]}),this.state.viewingDiscussions&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Discussions from people you follow"}),this.state.usersTheyFollowAndPosts.map((function(e){return Object(n.jsx)("div",{children:e.discussions.map((function(t){var s,i,c;return Object(n.jsxs)("div",{className:"timeline-item container",children:[Object(n.jsxs)("div",{className:"usr-info-timeline row",children:[Object(n.jsx)("img",{src:e.photo,alt:"user",className:"usr-avi-timeline"}),Object(n.jsx)(b.b,{to:"/profile/".concat(e._id),children:e.username})]}),Object(n.jsxs)("div",{className:"post-content-timeline row",children:[Object(n.jsx)("div",{className:"post-book-img col-md-3",children:Object(n.jsx)("img",{src:null===(s=t.book)||void 0===s?void 0:s.image_url,alt:"book-cvr"})}),Object(n.jsxs)("div",{className:"post-text-content col-md-9",children:[Object(n.jsxs)("h4",{children:[null===(i=t.book)||void 0===i?void 0:i.title," by: ",null===(c=t.book)||void 0===c?void 0:c.authors]}),Object(n.jsx)("h5",{children:t.title}),Object(n.jsx)("p",{children:t.discussionContent||t.content})]})]})]},t._id)}))})}))]})]})]})})}}]),s}(i.Component);function q(){return Object(n.jsxs)("footer",{children:[Object(n.jsxs)("div",{className:"foot-toleft",children:[Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{className:"foot-title",children:"COMPANY"}),Object(n.jsx)("li",{children:"About Us"}),Object(n.jsx)("li",{children:"Contact"}),Object(n.jsx)("li",{children:"Careers"}),Object(n.jsx)("li",{children:"Terms"}),Object(n.jsx)("li",{children:"Privacy"})]}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{className:"foot-title",children:"CONNECT"}),Object(n.jsxs)("div",{className:"foot-imgs",children:[Object(n.jsx)("li",{children:Object(n.jsx)("img",{src:"https://img.icons8.com/fluent/48/000000/github.png",alt:"github"})}),Object(n.jsx)("li",{children:Object(n.jsx)("img",{src:"https://img.icons8.com/metro/26/000000/linkedin.png",alt:"linkedin"})})]})]})]}),Object(n.jsx)("div",{className:"foot-toright",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:"Bookr."}),Object(n.jsx)("li",{children:"Ironhack PTWD June 2020"}),Object(n.jsx)("li",{children:"Final Project by Mikayla Castro"})]})})]})}var J=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={currentUser:null,reviews:[],discussions:[]},e.updateUser=function(t){f.getAuthenticatedUser().then((function(t){console.log("auth user in App.js ".concat(t)),e.setState({currentUser:t.data})})).catch((function(t){console.log("error in update user",t),e.setState({currentUser:null})}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.updateUser()}},{key:"render",value:function(){var e=this;return console.log("user in client",this.state.currentUser),Object(n.jsxs)("div",{children:[Object(n.jsx)(U,{user:this.state.currentUser,onUserChange:this.updateUser}),Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/",render:function(t){return Object(n.jsx)(S,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser,onUserChange:e.updateUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/search",render:function(e){return Object(n.jsx)(C,Object(r.a)({},e))}}),Object(n.jsx)(j.a,{exact:!0,path:"/signup",render:function(e){return Object(n.jsx)(w,Object(r.a)({},e))}}),Object(n.jsx)(j.a,{exact:!0,path:"/login",render:function(t){return Object(n.jsx)(g,Object(r.a)(Object(r.a)({},t),{},{onUserChange:e.updateUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/profile/:accountId",render:function(t){return Object(n.jsx)(R,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser,onUserChange:e.updateUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/account/:accountId",render:function(t){return Object(n.jsx)(T,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser,onUserChange:e.updateUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/shelves/:accountId",render:function(t){return Object(n.jsx)(A,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/discuss/:bookId",render:function(t){return Object(n.jsx)(F,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/discussions/:accountId",render:function(t){return Object(n.jsx)(H,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser,onUserChange:e.updateUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/discussinfo/:discussionId",render:function(t){return Object(n.jsx)(B,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/review/:bookId",render:function(t){return Object(n.jsx)(E,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/reviewinfo/:reviewId",render:function(t){return Object(n.jsx)(P,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/reviews/:accountId",render:function(t){return Object(n.jsx)(L,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser,onUserChange:e.updateUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/followers/:accountId",component:M}),Object(n.jsx)(j.a,{exact:!0,path:"/following/:accountId",component:W}),Object(n.jsx)(j.a,{exact:!0,path:"/bookinfo/:bookId",render:function(t){return Object(n.jsx)(K,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser}))}}),Object(n.jsx)(j.a,{exact:!0,path:"/home",render:function(t){return Object(n.jsx)(V,Object(r.a)(Object(r.a)({},t),{},{user:e.state.currentUser}))}})]}),Object(n.jsx)(q,{})]})}}]),s}(i.Component),G=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,63)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;s(e),n(e),i(e),c(e),o(e)}))};a.a.render(Object(n.jsx)(b.a,{children:Object(n.jsx)(J,{})}),document.getElementById("root")),G()}},[[62,1,2]]]);
//# sourceMappingURL=main.03b7ca3c.chunk.js.map